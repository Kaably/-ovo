// 赞赏弹窗控制（保留原有功能）
const modal = document.getElementById('imageModal');
const thankToast = document.getElementById('thankToast');

function openModal() {
  modal.style.display = 'block';
}

function closeModal() {
  modal.style.display = 'none';
  // 显示感谢提示
  thankToast.style.display = 'block';
  thankToast.style.opacity = '1';
  // 3秒后自动隐藏提示
  setTimeout(() => {
    thankToast.style.opacity = '0';
    setTimeout(() => {
      thankToast.style.display = 'none';
    }, 300);
  }, 3000);
}

// 点击弹窗外部关闭
window.onclick = function(e) {
  if (e.target === modal) closeModal();
};

// 增强版搜索功能（支持模糊匹配+别名搜索）
function searchHero() {
  const input = document.getElementById('searchInput').value.trim().toLowerCase();
  if (!input) {
    alert('请输入英雄名称搜索（如亚索、齐天大圣）');
    return;
  }

  // 英雄数据：包含主名+别名+对应页面
  const heroData = [
    { names: ['亚索', '疾风剑豪'], page: 'yasuo.html' },
    { names: ['盖伦', '德玛西亚之力'], page: 'gailun.html' },
    { names: ['永恩', '封魔剑魂'], page: 'yongen.html' },
    { names: ['武器', '武器大师', '贾克斯'], page: 'wuqi.html' },
    { names: ['猴子', '齐天大圣', '孙悟空'], page: 'houzi.html' },
    { names: ['船长', '海洋之灾', '普朗克'], page: 'chuanzhang.html' },
    { names: ['安妮', '黑暗之女'], page: 'anni.html' }
  ];

  // 模糊搜索逻辑：匹配任意名称的任意部分
  const results = heroData.filter(hero => {
    return hero.names.some(name => 
      name.toLowerCase().includes(input)
    );
  });

  if (results.length === 1) {
    // 唯一匹配：直接跳转
    window.location.href = results[0].page;
  } else if (results.length > 1) {
    // 多个匹配：提示用户选择
    const heroNames = results.map(hero => hero.names[0]).join('、');
    alert(`找到多个匹配英雄：${heroNames}\n请输入更精确的名称`);
  } else {
    alert('暂未收录该英雄攻略哦～');
  }
}

// 支持回车键触发搜索
document.getElementById('searchInput').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    searchHero();
  }
});
